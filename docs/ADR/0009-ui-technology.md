# ADR-0009: UI技術選定

## ステータス
採用

## 日付
2026-01-11

## コンテキスト
ChatGPT風のWebインターフェースを構築する。学習目的でモダンな技術スタックを試したい。個人用ツールとしてスタートし、将来的にチーム内ツールへグロースさせる予定。

### 検討したフレームワーク

| フレームワーク | 特徴 | 採用判断 |
|---------------|------|----------|
| Next.js (App Router) | 安定、情報豊富、SSR/SSG | 見送り |
| TanStack Start | TanStack Router/Query統合、Vinxiベース | **採用** |
| SvelteKit | 軽量・高速、独自記法 | 見送り |
| Leptos/Dioxus (Rust) | Rust統一、WASM | 見送り |
| Remix | Web標準重視 | 見送り |

### 検討したスタイリング

| 技術 | 特徴 | 採用判断 |
|------|------|----------|
| Tailwind CSS | ユーティリティファースト | 補助として採用 |
| shadcn/ui + Tailwind | コンポーネント集、コピペカスタマイズ | **採用** |
| CSS Modules | シンプル、スコープ明確 | 見送り |
| Panda CSS | ゼロランタイムCSS-in-JS | 見送り |

## 決定
**TanStack Start + shadcn/ui + Tailwind CSS**を採用する。パッケージマネージャーは**pnpm**を使用。

## 理由

### TanStack Start
1. **学習機会**: ベータ版だが新しいパラダイムを学べる
2. **統合性**: TanStack Router/Queryとの自然な統合
3. **型安全**: TypeScriptファースト
4. **ベータリスク許容**: 学習目的のため破壊的変更も許容

### shadcn/ui
1. **即戦力コンポーネント**: Button、Card、Input等すぐ使える
2. **カスタマイズ性**: コピペ方式でフル制御可能
3. **Tailwind統合**: 設計思想が一貫

### pnpm
1. **高速**: npm/yarnより高速
2. **ディスク効率**: ハードリンクで容量節約
3. **モノレポ対応**: workspaceサポート充実

## UI機能（優先度: 全て同等）
1. **セッション一覧 + 切替**: サイドバーでセッション管理（ChatGPT風）
2. **マークダウンレンダリング**: コードブロック、リストなど
3. **システムプロンプト設定**: セッションごとにカスタマイズ

## 通信方式
- **初期**: REST API（既存エンドポイント利用）
- **将来**: SSE/ストリーミング対応（ChatGPT風のストリーム表示）

## 開発環境
- Docker Composeで全サービスをコンテナ化
- UIもDockerで実行（ホットリロード対応）

## 結果
- モダンなスタックで学習しながらUI構築可能
- 既存のRust APIとスムーズに連携
- 将来の機能拡張（認証、ストリーミング）に対応しやすい設計
